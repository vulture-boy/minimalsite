var deadColor,liveColor,initMethod=2,behaveMethod=0,neutralValue=.5,cells=[[],[]],cellSize=24,numCells=[0,0],shades=1,shape=0,bufferActive=0,extents=[0,0],autoRun=!0,autoRunTime=0,fr=15,autoRunTimeMax=60;{function setup(){CanvasPrep(),Initialization(),UpdateAll()}function draw(){UpdateAll()}var mouseBool=!1;function mousePressed(){mouseBool=!0}function mouseReleased(){mouseBool=!1}function CanvasPrep(){extents[0]=windowWidth,extents[1]=windowHeight;var e=createCanvas(extents[0],extents[1]);e.parent("blurBackground"),e.position(0,0),frameRate(fr)}function Initialization(){deadColor=color("#bfb9b2e6"),liveColor=color("#f2ffef00"),InitializeCells()}function UpdateAll(){autoRun&&(RunActions(),MouseHover(),Visualize())}}{function InitializeCells(){numCells[0]=floor(extents[0]/cellSize),numCells[1]=floor(extents[1]/cellSize),bufferActive=0,cells[0]=[],cells[1]=[];for(var e=0;e<numCells[0];e++){cells[0][e]=[],cells[1][e]=[];for(var l=0;l<numCells[1];l++){switch(initMethod){case 2:cells[0][e][l]=neutralValue;break;case 1:cells[0][e][l]=random();break;case 0:default:cells[0][e][l]=0}cells[1][e][l]=0}}}function RunActions(){autoRunTimeMax<millis()-autoRunTime&&(Interact(),autoRunTime=millis())}function MouseHover(){var e=floor(mouseX/windowWidth*numCells[0]),l=floor(mouseY/windowHeight*numCells[1]);e>=0&&e<numCells[0]&&l>=0&&l<numCells[1]&&(cells[bufferActive][e][l]=mouseBool?1:0)}function Interact(){for(var e=0;e<numCells[0];e++)for(var l=0;l<numCells[1];l++)if(0==behaveMethod){var o=cells[bufferActive][e][l],n=[o,o,o,o];e<numCells[0]-2&&(n[1]=cells[bufferActive][e+2][l]),l<numCells[1]-2&&(n[2]=cells[bufferActive][e][l+2]),e>2&&(n[3]=cells[bufferActive][e-2][l]),l>2&&(n[0]=cells[bufferActive][e][l-2]);var s=(n[2]+n[1]+n[0]+n[3])/4,i=0;mouseBool&&(i=-0);var t=lerp(cells[bufferActive][e][l],s,.8);SwapBuffer(),cells[bufferActive][e][l]=Math.min(t+i,1),SwapBuffer()}SwapBuffer()}function SwapBuffer(){}function Visualize(){for(var e=0;e<numCells[0];e++)for(var l=0;l<numCells[1];l++){var o=e,n=l;erase(),DrawCell(color(255,255,255),o,n),noErase(),noStroke();color(0,0,0);DrawCell(lerpColor(deadColor,liveColor,cells[bufferActive][o][n]),o,n)}}function DrawCell(e,l,o){switch(fill(e),shape){case 0:default:square(round(l*cellSize),round(o*cellSize),cellSize);break;case 1:ellipse(round(l*cellSize),round(o*cellSize),1.3*cellSize)}}}{function windowResized(){extents[0]=windowWidth,extents[1]=windowHeight,resizeCanvas(extents[0],extents[1]),CopyCellsToNewArraySize()}function CopyCellsToNewArraySize(){for(var e=[0,0],l=[0,0],o=0;o<2;o++)e[o]=numCells[o],numCells[o]=floor(extents[o]/cellSize),l[o]=Math.min(numCells[o],e[o]);for(var n=0;n<numCells[0];n++){n>=l[0]&&(cells[0][n]=[],cells[1][n]=[]);for(var s=0;s<numCells[1];s++)(n>=l[0]||s>=l[1])&&(cells[0][n][s]=0,cells[1][n][s]=0)}}}